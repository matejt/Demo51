
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <link rel="shortcut icon" href="/backbone/favicon.ico" />
    <title>Backbone Demo</title>
    <link href="http://serverapi.arcgisonline.com/jsapi/arcgis/2.6/js/dojo/dijit/themes/claro/claro.css" rel="stylesheet" type="text/css" />
    <link rel='stylesheet' type='text/css' href='css/site.min.css' media='screen'/>
    <script src='javascript/lib/modernizr-2.0.6.js' ></script>
</head>
<body>
<header class="container">
</header>
<section id="main">
    <header><h1>Backbone.js Demo</h1></header>
    <div id="map" class="claro"><button id="map-search">Search</button></div>
    <div id="results"></div>
</section>
<footer class="container">
</footer>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="http://serverapi.arcgisonline.com/jsapi/arcgis/?v=2.7"></script>
<script src='javascript/lib/icanhaz.min.js' ></script>
<script src='javascript/lib/underscore-1.3.1.min.js' ></script>
<script src='javascript/lib/backbone-0.9.1.min.js' ></script>
<script src='javascript/lib/json2.min.js' ></script>
<script src='javascript/src/mapmodel.js' ></script>
<script src='javascript/src/resultitem.js' ></script>
<script src='javascript/src/resultscollection.js' ></script>
<script src='javascript/src/resultsview.js' ></script>
<script>
    dojo.require('esri.map');
    dojo.require('esri.toolbars.draw');
    dojo.require('esri.layers.FeatureLayer');
    dojo.addOnLoad(function () {
        var model = new bbd.MapModel();
        var resultsCollection = new bbd.ResultsCollection({
            mapModel: model,
            url: 'http://services.arcgisonline.com/ArcGIS/rest/services/Demographics/USA_Population_by_Sex/MapServer/1'
        });
        var view = new bbd.ResultsView({
            collection: resultsCollection,
            container: '#results',
            title: 'Census Block Groups',
            mapModel: model
        });
    });
</script>
<script type="text/html" id="results-set-template">
    <h2 class="results-heading">{{title}}</h2>
    <table class="results-table">
        <thead>
        <tr>
            <th>Total Population</th>
            <th>Males</th>
            <th>Females</th>
        </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</script>
<script type="text/html" id="result-item-template1">
    <td>
        {{TOTPOP_CY}}
    </td>
    <td>
        {{MALES_CY}}
    </td>
    <td>
        {{FEMALES_CY}}
    </td>
</script>
</body>
</html>
